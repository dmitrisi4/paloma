   # Задача: Реализация получения новостей из RSS-лент BBC

## 1. Настройка получения данных из RSS-лент BBC

1. Добавить библиотеку для работы с RSS-лентами:
   - Установить пакет `rss-parser` или аналогичный:
   ```bash
   npm install rss-parser --save
   ```
   - Импортировать библиотеку в соответствующий сервис

2. Создать сервис для работы с RSS в `apps/backend/src/services/news/rssService.ts`:
   - Реализовать функцию получения данных из RSS-ленты
   - Добавить обработку ошибок и таймауты
   - Реализовать парсинг полученных данных в удобный формат

3. Настроить работу с несколькими источниками RSS:
   - Добавить следующие источники новостей BBC:
     ```
     https://feeds.bbci.co.uk/news/rss.xml?edition=int
     https://feeds.bbci.co.uk/news/science_and_environment/rss.xml
     https://feeds.bbci.co.uk/news/technology/rss.xml
     https://feeds.bbci.co.uk/news/politics/rss.xml
     https://feeds.bbci.co.uk/news/health/rss.xml
     ```
   - Реализовать механизм ротации источников (каждый раз брать новости из следующего источника)
   - Сохранять информацию о последнем использованном источнике

## 2. Интеграция с существующей системой генерации контента

1. Модифицировать функцию генерации постов в `apps/backend/src/index.ts`:
   - Заменить заглушку с темами новостей на реальные данные из RSS
   - Добавить получение нескольких новостей из текущего источника
   - Передавать полученные новости в генератор контента

2. Адаптировать генератор контента для работы с данными из RSS:
   - Модифицировать prompt для AI, чтобы он учитывал структуру новостей из RSS
   - Добавить в контекст для AI ссылку на источник новости
   - Обеспечить сохранение ссылки на оригинальную новость в поле `sourceUrl` модели `Post`

## 3. Реализация механизма ротации источников

1. Создать простую систему хранения состояния ротации:
   - Использовать файл или базу данных для хранения индекса последнего использованного источника
   - Реализовать функцию получения следующего источника в очереди

2. Интегрировать механизм ротации в cron-задачу:
   - При каждом запуске cron-задачи получать следующий источник
   - Получать новости из этого источника
   - Обновлять индекс последнего использованного источника

## 4. Тестирование и отладка

1. Протестировать получение данных из каждого RSS-источника:
   - Проверить корректность парсинга заголовков, описаний и ссылок
   - Убедиться в отсутствии дубликатов

2. Проверить механизм ротации источников:
   - Убедиться, что источники меняются последовательно
   - Проверить корректность работы при перезапуске сервера

3. Интегрировать с существующей системой логирования:
   - Добавить логирование получения новостей из RSS
   - Логировать информацию о выбранном источнике при каждом запуске cron-задачи

## 5. Оптимизация и улучшения

1. Добавить кэширование результатов RSS для уменьшения нагрузки на источники
2. Реализовать фильтрацию новостей по релевантности или дате
3. Добавить обработку случаев, когда RSS-лента недоступна или возвращает ошибку
4. Рассмотреть возможность добавления новых источников новостей в будущем
        